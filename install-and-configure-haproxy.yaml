---
- hosts: load-balancers
  gather_facts: false
  vars:
    jinja_src_location: /home/kris/ansible_practice/graylog_installation/work_files/haproxy.cfg
    remote_haproxy_config: /etc/haproxy/haproxy.cfg
  tasks:
     
     - name: Install HaProxy
       ansible.builtin.apt:
         name: haproxy
         state: present
    
     - name: Apply HaProxy Configuration From Source
       ansible.builtin.template:
         src: "{{ jinja_src_location }}"
         dest: "{{ remote_haproxy_config }}"
      
     - name: Reload haproxy
       ansible.builtin.service:
         name: haproxy
         state: restarted